<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>home</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    <!-- <script src='main.js'></script> -->
</head>
<body>
    <h1 style="text-align:center; ">home</h6>
    <div style="padding: 1cm;">
        <span>회원 조회</span> <br/>
        ID <input type="text" id="searchMember"style="margin-top:10px;"> <input type="button" onclick="getMember()" value="조회하기"  style="margin-top:10px;"></button><br/>
        <div>
            <table>
                <tr><td>회원명 : </td><td id="tdName"></td></tr>
                <tr><td>회원ID : </td><td id="tdID"></td></tr>
            </table>
        </div>
    </div>
    <hr>
    <div style="padding: 1cm;">
        <span>모든 회원 조회</span> <input type="button" onclick="getMembers()" value="조회하기"  style="margin-top:10px;"></button><br/><br/>
        <div>
            <table id="getMembersTable">
            </table>
        </div>
    </div>

<script>
  const searchMember =document.querySelector("#searchMember");
  const tdName =document.querySelector("#tdName");
  const tdID =document.querySelector("#tdID");
  const getMembersTable = document.querySelector("#getMembersTable");
  
  function getMember(){
    console.log(searchMember.value);
    fetch("http://localhost:3000/auth/getMember",{
      method:"POST",
      headers: {
        "Content-Type":"application/json"
      },
      body:JSON.stringify({
        "id":searchMember.value
      })
    })
    .then((response)=>response.json())
    .then(
        (data)=>{
            console.log(data);
            tdName.innerHTML=data.name;
            tdID.innerHTML=data.id;
        }
    )
  }

  function getMembers(){
    fetch("http://localhost:3000/auth/getMembers",{
      method:"GET",
      headers: {
        "Content-Type":"application/json"
      },
    })
    .then((response)=>response.json())
    .then((data)=>{
        console.log(data);
        for (const d of data) {
            console.log(d);
            const trTag = document.createElement("tr");
            const nameLogo = document.createElement("td");
            const nameTag = document.createElement("td");
            const idLogo = document.createElement("td");
            const idTag = document.createElement("td");
            
            nameLogo.innerHTML="회원이름 : ";
            idLogo.innerHTML=" 회원ID : ";
            nameTag.innerHTML=d.name;
            idTag.innerHTML=d.id;
            trTag.appendChild(nameLogo);
            trTag.appendChild(nameTag);
            trTag.appendChild(idLogo);
            trTag.appendChild(idTag);

            getMembersTable.appendChild(trTag);
        }
    }); 
  }
</script>
</body>
</html>
